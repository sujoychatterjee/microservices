!function(t){var n=t._||require("underscore"),r=(Array.prototype.slice,Array.prototype.concat),e=function(t){return null!=t},u=function(t){return t!==!1&&e(t)},o=function(t){return n.isArray(t)||n.isObject(t)},a=function(t){return function(n){return function(r){return t(r,n)}}};n.mixin({merge:function(){var t=n.some(arguments)?{}:null;return u(t)&&n.extend.apply(null,r.call([t],n.toArray(arguments))),t},renameKeys:function(t,u){return n.reduce(u,function(n,r,u){return e(t[u])?(n[r]=t[u],n):n},n.omit.apply(null,r.call([t],n.keys(u))))},snapshot:function(t){if(null==t||"object"!=typeof t)return t;var r=new t.constructor;for(var e in t)t.hasOwnProperty(e)&&(r[e]=n.snapshot(t[e]));return r},updatePath:function(t,r,u,a){if(!o(t))throw new TypeError("Attempted to update a non-associative object.");if(!e(u))return r(t);var i=n.isArray(u),c=i?u:[u],s=i?n.snapshot(t):n.clone(t),l=n.last(c),p=s;return n.each(n.initial(c),function(t){a&&!n.has(p,t)&&(p[t]=n.clone(a)),p=p[t]}),p[l]=r(p[l]),s},setPath:function(t,r,u,o){if(!e(u))throw new TypeError("Attempted to set a property at a null path.");return n.updatePath(t,function(){return r},u,o)},frequencies:a(n.countBy)(n.identity)})}(this);